{% extends "nonadmin/layout.html" %} {% block body %}

<div class="inner m-5">
	<h2 class="text-center pb-3 text-danger">List of Books</h2>
	<div class="bg-warning-subtle border-start border-warning border-5 p-2 d-flex mb-2">
		<ion-icon name="notifications-outline" class="p-2 ms-2 me-2 bg-warning bg-opacity-50 rounded" style="font-size: 1.5rem;"></ion-icon>
		<a href="" class="pt-2 fs-6 text-decoration-none text-dark fw-medium" data-bs-toggle="modal" data-bs-target="#extendModal">Reminder: There are 2 books that need to be renewed before October 12, 2023 (click here)</a href="">
	</div>
	<div class="container-fluid bg-light my-2">
		<div class="d-flex justify-content-end p-2"> 
			<form role="search" class="d-flex me-2">
				<input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
				<button class="btn btn-outline-success" type="submit">Search</button>
			</form>
			<select name="Genre" id="" class="btn btn-secondary dropdown-toggle p-2">
				<option value="">Genre</option>
				<option value="1">Genre 1</option>
				<option value="2">Genre 2</option>
				<option value="3">Genre 3</option>
				<option value="4">Genre 4</option>
			</select>
		</div>
	</div>

	{% if books %}
	<div class="row">
		{% for book in books %}
		<div class="col-12 col-md-3 mt-1 mb-1">
			<div id="{{ book.book_id }}" class="card cb1" style="height:100%">
				<img
					src="{{ url_for('static', filename='images/createthumb.jpeg') }}"
					class="card-img-top w-50 mx-auto d-block pt-4"
				/>
				<div class="card-body">
					<h5 class="card-title">{{ book.title|limit_text(25) }}</h5>
					<p class="card-text text-danger">{{ book.writer|limit_text(20) }}</p>
					<p>{{ book.genre_name }}</p>
				</div>
				<div class="mb-5 d-flex justify-content-around">
					<h4 class="text-success">{{ average_ratings[book.book_id] }}/5</h4>
					<a
						href="{{ url_for('user.book_details', title=book.title, id=book.book_id) }}"
					>
						<button
							class="btn btn-outline-warning rounded-pill"
						>
							Review
						</button>
					</a>
				</div>
			</div>
		</div>
		{% endfor %}
	</div>
	{% endif %}

	<div class="modal fade" id="extendModal" tabindex="-1" aria-labelledby="extendModalLabel" aria-hidden="true">
		<div class="modal-dialog">
		  <div class="modal-content">
			<div class="modal-header">
			  <h1 class="modal-title fs-5" id="extendModalLabel">Extend Book Borrowing Duration</h1>
			  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<p>Please extend the books before October 20, 2023</p>
			</div>
			<div class="modal-footer">
			  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
			  <a class="btn btn-success" href="{{ url_for('user.borrow_book') }}">Extend</a>
			</div>
		  </div>
		</div>
	</div>
	{% endblock %}
</div>
