	{% extends "nonadmin/layout.html" %} {% block body %}
	<div class="inner m-5">
		<h2 class="text-center pb-3b text-danger">Rooms</h2>
		<div class="row row-cols-1 row-cols-md-4 g-4 py-2">
			{% for room in rooms %}
			<div class="col">
				<div class="card">
					<img
						src="data:image/jpeg;base64,{{ room.image }}"
						class="card-img-top mx-auto d-block pt-3"
						alt="..."
					/>
					<div class="card-body">
						<h5 class="card-title">{{ room.name }}</h5>
					</div>
					<div class="mb-5 d-flex justify-content-around">
						{% if room.status == "Available" %}
						<h4 class="text-success">{{ room.status }}</h4>
						<button
							class="btn btn-outline-success rounded-pill"
							data-bs-toggle="modal"
							data-bs-target="#room{{room.id}}Modal"
						>
							Reserve
						</button>
						{% else %}
						<h4 class="text-danger">{{ room.status }}</h4>
						<button
							class="btn btn-outline-danger rounded-pill disabled"
							data-bs-toggle="modal"
							data-bs-target="#room{{room.id}}Modal"
						>
							Reserve
						</button>
						{% endif %}
					</div>
				</div>
			</div>

			<div
				class="modal fade"
				id="room{{ room.id }}Modal"
				tabindex="-1"
				aria-labelledby="room{{ room.id }}ModalLabel"
				aria-hidden="true"
			>
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<h1
								class="modal-title fs-5"
								id="room{{ room.id }}ModalLabel"
							>
								{{ room.name }}
							</h1>
							<button
								type="button"
								class="btn-close"
								data-bs-dismiss="modal"
								aria-label="Close"
							></button>
						</div>
						<div class="modal-body">
							<form
								action="/reserve_room/{{ room.id }}"
								method="POST"
							>
								<!-- Added form tag with method="POST" -->
								<div class="mb-3">
									<label for="startTime" class="form-label">Start Time</label>
									<select class="form-control" id="startTime" name="start_time" required>
									<option value="">Select a time</option>
									<option value="09:00">9:00</option>
									<option value="10:00">10:00</option>
									<option value="11:00">11:00</option>
									<option value="12:00">12:00</option>
									<option value="13:00">13:00</option>
									<option value="14:00">14:00</option>
									<option value="15:00">15:00</option>
									<option value="16:00">16:00</option>
									<option value="17:00">17:00</option>
									<option value="18:00">18:00</option>
									<option value="19:00">19:00</option>
									<option value="20:00">20:00</option>
									<option value="21:00">21:00</option>								  
									<option value="22:00">22:00</option>
									</select>
								</div>
								
								<div class="mb-3">
									<label for="endTime" class="form-label">End Time</label>
									<select class="form-control" id="endTime" name="end_time" required>
									<option value="">Select a time</option>
									<option value="09:00">9:00</option>
									<option value="10:00">10:00</option>
									<option value="11:00">11:00</option>
									<option value="12:00">12:00</option>
									<option value="13:00">13:00</option>
									<option value="14:00">14:00</option>
									<option value="15:00">15:00</option>
									<option value="16:00">16:00</option>
									<option value="17:00">17:00</option>
									<option value="18:00">18:00</option>
									<option value="19:00">19:00</option>
									<option value="20:00">20:00</option>
									<option value="21:00">21:00</option>								  
									<option value="22:00">22:00</option>
									<option value="23:00">23:00</option>								  
									<option value="24:00">24:00</option>
									</select>
								</div>
								
								<div class="modal-footer">
									<button
										type="button"
										class="btn btn-secondary"
										data-bs-dismiss="modal"
									>
										Close
									</button>
									<button type="submit" class="btn btn-success">
										Reserve
									</button>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
			{% endfor %}
		</div>
	</div>

	<script>
		function disableEndTimes() {
		  const startTimeSelect = document.getElementById('startTime');
		  const endTimeSelect = document.getElementById('endTime');
		  
		  for (let i = 0; i < endTimeSelect.options.length; i++) {
			endTimeSelect.options[i].disabled = false;
		  }
		  
		  const selectedStartTime = parseInt(startTimeSelect.value, 10);
		  
		  for (let i = 0; i < endTimeSelect.options.length; i++) {
			const endTime = parseInt(endTimeSelect.options[i].value, 10);
			if (endTime <= selectedStartTime || endTime > selectedStartTime + 2) {
			  endTimeSelect.options[i].disabled = true;
			}
		  }
		}
		
		document.getElementById('startTime').addEventListener('change', disableEndTimes);
		disableEndTimes();
	  </script>
	  
	  
	{% endblock %}
